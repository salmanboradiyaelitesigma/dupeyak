var DomOutline=function(e){var t={},o={opts:{namespace:(e=e||{}).namespace||"DomOutline",borderWidth:e.borderWidth||2,onClick:e.onClick||!1,onHover:e.onHover||!1,filter:e.filter||!1},keyCodes:{BACKSPACE:8,ESC:27,DELETE:46},active:!1,initialized:!1,elements:{}};function s(e){if(("string"!=typeof e.target.className||-1===e.target.className.indexOf(o.opts.namespace))&&(!o.opts.filter||jQuery(e.target).is(o.opts.filter))){t.element=e.target;var s,n,a,i,l=o.opts.borderWidth,d=(o.elements.window||(o.elements.window=jQuery(window)),o.elements.window.scrollTop()),p=t.element.getBoundingClientRect(),r=p.top+d,c=(s=t.element,n=p.width,a=p.height,i=s.tagName.toLowerCase(),s.id&&(i+="#"+s.id),s.className&&(i+=("."+jQuery.trim(s.className).replace(/ /g,".")).replace(/\.\.+/g,".")),i+" ("+Math.round(n)+"x"+Math.round(a)+")"),m=Math.max(0,r-20-l,d),u=Math.max(0,p.left-l);o.elements.label.css({top:m,left:u}).text(c),o.elements.top.css({top:Math.max(0,r-l),left:p.left-l,width:p.width+l,height:l}),o.elements.bottom.css({top:r+p.height,left:p.left-l,width:p.width+l,height:l}),o.elements.left.css({top:r-l,left:Math.max(0,p.left-l),width:l,height:p.height+l}),o.elements.right.css({top:r-l,left:p.left+p.width,width:l,height:p.height+2*l})}}function n(e){return e.keyCode!==o.keyCodes.ESC&&e.keyCode!==o.keyCodes.BACKSPACE&&e.keyCode!==o.keyCodes.DELETE||t.stop(),!1}function a(e){return t.stop(),o.opts.onClick(t.element,e),!1}function i(e){return o.opts.onHover(t.element,e),!1}return t.start=function(){var e,t;!0!==o.initialized&&(e="."+o.opts.namespace+" {    background: #09c;    position: absolute;    z-index: 1000000;}."+o.opts.namespace+"_label {    background: #09c;    border-radius: 2px;    color: #fff;    font: bold 12px/12px Helvetica, sans-serif;    padding: 4px 6px;    position: absolute;    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25);    z-index: 1000001;}",(t=document.createElement("style")).type="text/css",document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e,o.initialized=!0),!0!==o.active&&(o.active=!0,o.elements.label=jQuery("<div></div>").addClass(o.opts.namespace+"_label").appendTo("body"),o.elements.top=jQuery("<div></div>").addClass(o.opts.namespace).appendTo("body"),o.elements.bottom=jQuery("<div></div>").addClass(o.opts.namespace).appendTo("body"),o.elements.left=jQuery("<div></div>").addClass(o.opts.namespace).appendTo("body"),o.elements.right=jQuery("<div></div>").addClass(o.opts.namespace).appendTo("body"),jQuery("body").on("mousemove."+o.opts.namespace,s),jQuery("body").on("keyup."+o.opts.namespace,n),o.opts.onClick&&setTimeout(function(){jQuery("body").on("click."+o.opts.namespace,function(e){if(o.opts.filter&&!jQuery(e.target).is(o.opts.filter))return!1;a.call(this,e)})},50),o.opts.onHover&&setTimeout(function(){jQuery("body").on("mousemove."+o.opts.namespace,function(e){if(o.opts.filter&&!jQuery(e.target).is(o.opts.filter))return!1;i.call(this,e)})},50))},t.stop=function(){o.active=!1,jQuery.each(o.elements,function(e,t){t.remove()}),jQuery("body").off("mousemove."+o.opts.namespace).off("keyup."+o.opts.namespace).off("click."+o.opts.namespace)},t};